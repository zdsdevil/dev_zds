(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fa1f0358"],{"1da1":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n("d3b7");function i(e,t,n,i,r,a,o){try{var u=e[a](o),s=u.value}catch(l){return void n(l)}u.done?t(s):Promise.resolve(s).then(i,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function u(e){i(o,r,a,u,s,"next",e)}function s(e){i(o,r,a,u,s,"throw",e)}u(void 0)}))}}},2909:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));n("277d");var i=n("6b75");function r(e){if(Array.isArray(e))return Object(i["a"])(e)}n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function a(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var o=n("06c5");function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return r(e)||a(e)||Object(o["a"])(e)||u()}},5961:function(e,t,n){},"78d2":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i="http://121.40.119.210:7001/public"},"91b6":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var i=n("b775");function r(e){return Object(i["b"])({url:"/api/upload",method:"post",data:e})}function a(e){return Object(i["b"])({url:"/api/uploads",method:"post",data:e})}},"98b0":function(e,t,n){"use strict";n("5961")},b9cc:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-card",{attrs:{bordered:!1,title:"主页背景图片"}},[n("div",{staticClass:"clearfix"},[n("a-upload",{ref:"files",attrs:{"list-type":"picture-card",multiple:"","file-list":e.fileList,"before-upload":e.beforeUpload},on:{remove:e.handleRemove,preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<8?n("div",[n("a-icon",{attrs:{type:"plus"}}),n("div",{staticClass:"ant-upload-text"},[e._v(" 选择图片 ")])],1):e._e()]),n("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[n("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),n("a-button",{attrs:{type:"primary",disabled:0===e.fileList.length,loading:e.uploading},on:{click:e.handleUpload}},[e._v("保存")])],1)},r=[],a=n("2909"),o=n("1da1"),u=(n("96cf"),n("d3b7"),n("d81d"),n("c975"),n("fb6a"),n("a434"),n("99af"),n("4160"),n("159b"),n("4360")),s=n("91b6"),l=(n("534d"),n("78d2"));function c(e){return new Promise((function(t,n){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return n(e)}}))}var f={data:function(){return{userInfo:{},previewVisible:!1,previewImage:"",uploading:!1,fileList:[]}},mounted:function(){this.userInfo=u["a"].getters.userInfo,this.fileList=this.userInfo.blogConfig?this.userInfo.blogConfig.bgImgs.map((function(e){return{uid:e,name:e,status:"done",url:l["a"]+e}})):[]},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.url||e.preview){n.next=4;break}return n.next=3,c(e.originFileObj);case 3:e.preview=n.sent;case 4:t.previewImage=e.url||e.preview,t.previewVisible=!0;case 6:case"end":return n.stop()}}),n)})))()},handleChange:function(e){var t=e.fileList;this.fileList=t},handleRemove:function(e){var t=this.fileList.indexOf(e),n=this.fileList.slice();n.splice(t,1),this.fileList=n},beforeUpload:function(e){return this.fileList=[].concat(Object(a["a"])(this.fileList),[e]),!1},handleUpload:function(){var e=this,t=this.fileList,n=new FormData;t.forEach((function(e,t){n.append("files[]",e.originFileObj)})),this.uploading=!0,Object(s["a"])(n).then((function(t){l["a"],t.result.url;var n=[];e.fileList.forEach((function(e){e.originFileObj||n.push(e.uid)})),e.updateUser({id:e.userInfo._id,blogConfig:{bgImgs:[].concat(n,Object(a["a"])(t.result.ids))}}),e.uploading=!1}))},updateUser:function(e){var t=this;u["a"].dispatch("UpdateUser",e).then((function(e){t.$message.success("保存成功")}))}}},d=f,p=(n("98b0"),n("2877")),b=Object(p["a"])(d,i,r,!1,null,null,null);t["default"]=b.exports}}]);