(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e506181"],{"348d":function(e,t,r){"use strict";r("ebf6")},"88bc":function(e,t,r){(function(t){var r=1/0,a=9007199254740991,s="[object Arguments]",n="[object Function]",l="[object GeneratorFunction]",o="[object Symbol]",i="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,u=i||c||Function("return this")();function d(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function p(e,t){var r=-1,a=e?e.length:0,s=Array(a);while(++r<a)s[r]=t(e[r],r,e);return s}function f(e,t){var r=-1,a=t.length,s=e.length;while(++r<a)e[s+r]=t[r];return e}var m=Object.prototype,v=m.hasOwnProperty,h=m.toString,b=u.Symbol,w=m.propertyIsEnumerable,g=b?b.isConcatSpreadable:void 0,y=Math.max;function C(e,t,r,a,s){var n=-1,l=e.length;r||(r=j),s||(s=[]);while(++n<l){var o=e[n];t>0&&r(o)?t>1?C(o,t-1,r,a,s):f(s,o):a||(s[s.length]=o)}return s}function k(e,t){return e=Object(e),_(e,t,(function(t,r){return r in e}))}function _(e,t,r){var a=-1,s=t.length,n={};while(++a<s){var l=t[a],o=e[l];r(o,l)&&(n[l]=o)}return n}function x(e,t){return t=y(void 0===t?e.length-1:t,0),function(){var r=arguments,a=-1,s=y(r.length-t,0),n=Array(s);while(++a<s)n[a]=r[t+a];a=-1;var l=Array(t+1);while(++a<t)l[a]=r[a];return l[t]=n,d(e,this,l)}}function j(e){return O(e)||L(e)||!!(g&&e&&e[g])}function $(e){if("string"==typeof e||R(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}function L(e){return F(e)&&v.call(e,"callee")&&(!w.call(e,"callee")||h.call(e)==s)}var O=Array.isArray;function q(e){return null!=e&&P(e.length)&&!T(e)}function F(e){return A(e)&&q(e)}function T(e){var t=S(e)?h.call(e):"";return t==n||t==l}function P(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function S(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function A(e){return!!e&&"object"==typeof e}function R(e){return"symbol"==typeof e||A(e)&&h.call(e)==o}var I=x((function(e,t){return null==e?{}:k(e,p(C(t,1),$))}));e.exports=I}).call(this,r("c8ba"))},e683:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("div",{staticClass:"table-page-search-wrapper"},[r("a-form",{attrs:{layout:"inline"}},[r("a-row",{attrs:{gutter:48}},[r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"账号名称"}},[r("a-input",{attrs:{placeholder:"请输入"},model:{value:e.queryParam.username,callback:function(t){e.$set(e.queryParam,"username",t)},expression:"queryParam.username"}})],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("a-form-item",{attrs:{label:"状态"}},[r("a-select",{attrs:{placeholder:"请选择","default-value":"0"},model:{value:e.queryParam.status,callback:function(t){e.$set(e.queryParam,"status",t)},expression:"queryParam.status"}},[r("a-select-option",{attrs:{value:"0"}},[e._v("全部")]),r("a-select-option",{attrs:{value:"1"}},[e._v("启用")]),r("a-select-option",{attrs:{value:"2"}},[e._v("禁用")])],1)],1)],1),r("a-col",{attrs:{md:8,sm:24}},[r("span",{staticClass:"table-page-search-submitButtons"},[r("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),r("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1)])],1)],1)],1),r("a-row",[r("a-col",[r("a-button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:e.handleAdd}},[e._v("新增")])],1)],1),r("s-table",{ref:"table",attrs:{"row-key":"id",size:"default",columns:e.columns,data:e.loadData},scopedSlots:e._u([{key:"role",fn:function(t){return r("span",{},[e._v(e._s(t.name))])}},{key:"status",fn:function(t){return r("a-tag",{attrs:{color:1===t?"blue":"red"}},[e._v(e._s(e._f("statusFilter")(t)))])}},{key:"createdAt",fn:function(t){return r("span",{},[e._v(e._s(e._f("moment")(t)))])}},{key:"action",fn:function(t,a){return r("span",{},[r("a",{on:{click:function(t){return e.goBlog(a.id)}}},[e._v("博客主页")]),r("a-divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(t){return e.handleEdit(a)}}},[e._v("编辑")]),r("a-divider",{attrs:{type:"vertical"}}),r("a",{on:{click:function(t){return e.handleDelete(a.id)}}},[e._v("删除")])],1)}}])}),r("a-modal",{staticStyle:{top:"20px"},attrs:{title:e.modalTitle,width:800},on:{ok:e.handleOk},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[r("a-form",{staticClass:"permission-form",attrs:{form:e.form}},[r("a-form-item",[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{type:"hidden"}})],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"账号名称",hasFeedback:""}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["username",{rules:[{required:!0,message:e.$t("user.username.required")}],validateTrigger:["change","blur"]}],expression:"['username',{rules: [{ required: true, message: $t('user.username.required') }], validateTrigger: ['change', 'blur']}]"}],attrs:{placeholder:"起一个名字"}})],1),"新增"===e.modalTitle?r("a-popover",{attrs:{placement:"rightTop",trigger:["focus"],getPopupContainer:function(e){return e.parentElement}},model:{value:e.state.passwordLevelChecked,callback:function(t){e.$set(e.state,"passwordLevelChecked",t)},expression:"state.passwordLevelChecked"}},[r("template",{slot:"content"},[r("div",{style:{width:"240px"}},[r("div",{class:["user-register",e.passwordLevelClass]},[e._v(e._s(e.$t(e.passwordLevelName)))]),r("a-progress",{attrs:{percent:e.state.percent,showInfo:!1,strokeColor:e.passwordLevelColor}}),r("div",{staticStyle:{"margin-top":"10px"}},[r("span",[e._v(e._s(e.$t("user.register.password.popover-message"))+" ")])])],1)]),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"密码",hasFeedback:""}},[r("a-input-password",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:e.$t("user.password.required")},{validator:this.handlePasswordLevel}],validateTrigger:["change","blur"]}],expression:"['password', {rules: [{ required: true, message: $t('user.password.required') }, { validator: this.handlePasswordLevel }], validateTrigger: ['change', 'blur']}]"}],attrs:{placeholder:e.$t("user.register.password.placeholder")}})],1)],2):e._e(),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"角色",hasFeedback:""}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["role",{rules:[{required:!0,message:e.$t("user.role.required")}],validateTrigger:["change","blur"]}],expression:"['role',{rules: [{required: true,message: $t('user.role.required')}], validateTrigger: ['change', 'blur']}]"}]},e._l(e.roleList,(function(t){return r("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])})),1)],1),r("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"状态",hasFeedback:""}},[r("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",{initialValue:1}],expression:"['status', { initialValue: 1 }]"}]},[r("a-select-option",{attrs:{value:1}},[e._v("正常")]),r("a-select-option",{attrs:{value:2}},[e._v("禁用")])],1)],1)],1)],1)],1)},s=[],n=r("5530"),l=(r("88bc"),r("2af9")),o=r("534d"),i=r("45e8"),c=r("ca00"),u={0:"user.password.strength.short",1:"user.password.strength.low",2:"user.password.strength.medium",3:"user.password.strength.strong"},d={0:"error",1:"error",2:"warning",3:"success"},p={0:"#ff0000",1:"#ff0000",2:"#ff7e05",3:"#52c41a"},f={1:"启用",2:"禁用"},m=[{title:"账号名称",dataIndex:"username"},{title:"角色",width:"200px",dataIndex:"role",scopedSlots:{customRender:"role"}},{title:"状态",width:"200px",dataIndex:"status",scopedSlots:{customRender:"status"}},{title:"创建时间",width:"200px",dataIndex:"createdAt",scopedSlots:{customRender:"createdAt"},sorter:!0},{title:"操作",width:"200px",dataIndex:"action",scopedSlots:{customRender:"action"}}],v={name:"TableList",components:{STable:l["m"]},data:function(){var e=this;return{description:"列表使用场景：后台管理中的权限管理以及角色管理，可用于基于 RBAC 设计的角色权限控制，颗粒度细到每一个操作类型。",roleList:[],visible:!1,modalTitle:"",labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},form:this.$form.createForm(this),permissions:[],advanced:!1,queryParam:{},columns:m,loadData:function(t){return Object(o["f"])(Object.assign(t,e.queryParam)).then((function(e){return e.result}))},selectedRowKeys:[],selectedRows:[],state:{level:0,passwordLevel:0,passwordLevelChecked:!1,percent:10,progressColor:"#FF0000"}}},filters:{statusFilter:function(e){return f[e]},permissionFilter:function(e){var t=i["a"][e];return t&&t.label}},computed:{passwordLevelClass:function(){return d[this.state.passwordLevel]},passwordLevelName:function(){return u[this.state.passwordLevel]},passwordLevelColor:function(){return p[this.state.passwordLevel]}},created:function(){var e=this;Object(o["e"])().then((function(t){e.roleList=t.result.data}))},methods:{goBlog:function(e){this.$router.push("/app/blogger/"+e)},handlePasswordLevel:function(e,t,r){if(!t)return r();t.length>=6?(Object(c["a"])(t)>=30&&(this.state.level=1),Object(c["a"])(t)>=60&&(this.state.level=2),Object(c["a"])(t)>=80&&(this.state.level=3)):(this.state.level=0,r(new Error(this.$t("user.password.strength.msg")))),this.state.passwordLevel=this.state.level,this.state.percent=33*this.state.level,r()},handleAdd:function(){this.visible=!0,this.modalTitle="新增",this.form.resetFields()},handleDelete:function(e){var t=this;this.$confirm({content:"确定删除用户？",onOk:function(){Object(o["d"])(e).then((function(e){t.$message.success("操作成功"),t.$refs.table.refresh(!0)}))}})},handleEdit:function(e){var t=this;this.visible=!0,this.modalTitle="编辑";var r={};this.$nextTick((function(){t.form.setFieldsValue({id:e.id,username:e.username,role:e.role._id,status:e.status}),t.form.setFieldsValue(r)}))},handleOk:function(e){var t=this;e.preventDefault(),this.form.validateFields((function(e,r){e||("新增"===t.modalTitle?Object(o["b"])(Object(n["a"])({},r)).then((function(e){t.$message.success("创建成功"),t.$refs.table.refresh(!0),t.visible=!1})):Object(o["i"])(Object(n["a"])({},r)).then((function(e){t.$message.success("操作成功"),t.$refs.table.refresh(!0),t.visible=!1})))}))},onChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},toggleAdvanced:function(){this.advanced=!this.advanced}},watch:{}},h=v,b=(r("348d"),r("2877")),w=Object(b["a"])(h,a,s,!1,null,"5dc06a6a",null);t["default"]=w.exports},ebf6:function(e,t,r){}}]);